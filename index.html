<!DOCTYPE html>
<html>
<head>
<title>Korvais</title>
<link rel="stylesheet" href="css/korvai.css">
<link rel="shortcut icon" type="image/png" href="img/favicon.png">
</head>
<body>

<p>
A <b>korvai</b> is a mathematical pattern of swarams that is usually sang
at the end of the improvised part of a song. This site was created
to help people understand and make their own korvais.<br><br>
Start by picking a talam below.
</p>

<div style=height:40px;></div>
<div style="text-align:center;">
<div>
  <select id="tal">
    <option value=None>Talam</option>
    <option value="0">Adi Talam</option>
    <option value="1">Rupaka Talam</option>
    <option value="2">Misra Chapu</option>
    <option value="3">Khanda Chapu</option>
  </select>
</div>

<div style=height:20px;></div>
<button type="button" onclick="myFunction()">Make korvai</button>
</div>

<div class="korvais">
<p style="margin:30px;margin-top:30px;" id="demo"></p>
</div>

<script>
function myFunction() {
  var poorvangam = [];
  var utharangam = [];
  var karvai = [];
  var iterations = 0;
  var talamList = [96, 108, 84, 90];
  var finalList = [];

  var e = document.getElementById("tal");
  var result = e.options[e.selectedIndex].value;
  var beats = talamList[result]/3

  var i;
  var j;
  var k;
  for (i = 1; i < beats; i++) {
    for (j = 1; j < beats; j++) {
      for (k = 0; k < beats; k++) {
        if (i%3 == 0 && j%3 == 0 && k%2 == 0) {
          if (i+j+k == beats || i+j+k == beats*2) {
            // this next if makes sure the karvai is shorter than the utarangam and the poorvangam is greater/equal to than 9
            if (i/3 >= 3 && j/3 > 3) {
              poorvangam.push(i);
              utharangam.push(j);
              karvai.push(k);
              iterations ++;
            }
          }
        }
      }
    }
  }

  var num;
  for (num = 0; num < iterations; num++) {
    var num2 = num+1
    var line0 = "<br><b>" + num2 + ".</b><br>"
    var line1 = "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span><br>";
    var line2 = "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span><br><br>";
    var line3 = "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span><br>";
    var line4 = "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span><br><br>";
    var line5 = "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span> " + "<span style='color:red'>" + poorvangam[num]/3 + "</span><br>";
    var line6 = "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span> " + "<span style='color:blue'>" + karvai[num]/2 + "</span> " + "<span style='color:green'>" + utharangam[num]/3 + "</span><br><br><br>";
    finalList.push(line0, line1, line2, line3, line4, line5, line6);
  }

  var str = finalList.join('');
  document.getElementById("demo").innerHTML = str;
}
</script>

<p>Site by <a href="https://sahasramesh.com" target="_blank">Sahas Ramesh</a>.<br>
Have any ideas for the site?
Send me suggestions <a href="mailto:sahasramesh22@gmail.com?subject=Korvai%20Maker%20Feedback&" target="_blank">here</a>.
</p>
</body>
</html>
